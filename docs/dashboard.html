<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Employee Smart Roster</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/reports.css">
    <link rel="stylesheet" href="css/attendance.css">
    <link rel="stylesheet" href="css/payroll.css">
    <!-- FullCalendar Dependencies -->
    <script src='https://cdn.jsdelivr.net/npm/@fullcalendar/core/index.global.min.js'></script>
    <script src='https://cdn.jsdelivr.net/npm/@fullcalendar/daygrid/index.global.min.js'></script>
    <script src='https://cdn.jsdelivr.net/npm/@fullcalendar/interaction/index.global.min.js'></script>
    <script src='https://cdn.jsdelivr.net/npm/@fullcalendar/timegrid/index.global.min.js'></script>
    <!-- Chart.js Library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Custom JavaScript -->
    <script src="js/dashboard.js" defer></script>
    <script src="js/reports.js" defer></script>
    <script src="js/attendance.js" defer></script>
    <script src="js/payroll.js" defer></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="js/notifications.js"></script>
</head>
<body>      
    <!-- Header -->
    <div class="header">
        <div class="logo">ShiftRoster</div>
        <div class="search-bar">
            <input type="text" placeholder="Search...">
        </div>
        <div class="header-right">
            <div class="notification-icon">
                <i class="fas fa-bell"></i>
            </div>
            <div class="profile-icon" onclick="toggleProfileModal()">
                <i class="fas fa-user"></i>
            </div>
            <div class="settings-dropdown">
                <i class="fas fa-cog" onclick="toggleDropdown()"></i>
                <div id="settingsDropdown" class="dropdown-content">
                    <a href="#"><i class="fas fa-user-cog"></i> Settings</a>
                    <a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="nav-item active">
                <i class="fas fa-th-large"></i>
                Dashboard
            </div>
            <div class="nav-item admin-only" id="employee-management">
                <i class="fas fa-users-cog"></i>
                Employee Management
            </div>
            <div class="nav-item">
                <i class="fas fa-calendar-alt"></i>
                Schedule
            </div>
            <div class="nav-item">
                <i class="fas fa-calendar-check"></i>
                Availability
            </div>
            <div class="nav-item manager-only" id="generate-shifts-nav">
                <i class="fas fa-magic"></i>
                Generate Shifts
            </div>
            <div class="nav-item">
                <i class="fas fa-clock"></i>
                Time Off
            </div>
            <div class="nav-item">
                <i class="fas fa-chart-bar"></i>
                Reports
            </div>
            <div class="nav-item">
                <i class="fas fa-check-circle"></i>
                Attendance Rate
            </div>
            <div class="nav-item">
                <i class="fas fa-money-bill-wave"></i>
                Payroll
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="content-header">
                <h1>Master Roster</h1>
            </div>
            
            <!-- Upcoming Shifts Section -->
            <div class="upcoming-shifts-section">
                <h2>Upcoming Shifts</h2>
                <div class="shifts-container">
                    <!-- Shifts will be added dynamically here -->
                </div>
            </div>
            
            <!-- Calendar Section -->
            <div class="calendar-section">
                <div class="section-header">
                    <h2>Calendar</h2>
                    <!-- Add employee filter for managers/admins -->
                    <div class="calendar-filters manager-only">
                        <select id="employee-filter" class="employee-filter">
                            <option value="all">All Employees</option>
                            <!-- Will be populated dynamically -->
                        </select>
                        <select id="department-filter" class="department-filter">
                            <option value="all">All Departments</option>
                            <!-- Will be populated dynamically -->
                        </select>
                    </div>
                </div>
                <div id="calendar"></div>
            </div>

            <!-- Generate Shifts Section -->
            <div class="generate-shifts-section" style="display: none;">
                <div class="section-header">
                    <h2>Generate Shifts</h2>
                </div>
                <div class="section-content">
                    <div class="card">
                        <div class="card-header">
                            <h3>Create Automatic Shift Schedule</h3>
                            <p>Generate shifts based on employee availability and workload distribution.</p>
                        </div>
                        <div class="card-body">
                            <form id="generateShiftsForm">
                                <div class="form-group">
                                    <label for="startDate">Start Date:</label>
                                    <input type="date" id="startDate" name="startDate" required>
                                </div>
                                <div class="form-group">
                                    <label for="endDate">End Date:</label>
                                    <input type="date" id="endDate" name="endDate" required>
                                </div>
                                <div class="form-actions">
                                    <button type="submit" class="btn-primary">
                                        <i class="fas fa-magic"></i> Generate Shifts
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <div class="employee-section" style="display: none;">
                <div class="section-header">
                    <h2>Employee Management</h2>
                    <button class="btn-primary" onclick="showCreateEmployeeModal()">
                        <i class="fas fa-plus"></i> Create New Employee
                    </button>
                </div>
                <div class="employee-list">
                    <table id="employeeTable">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Role</th>
                                <th>Department</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="employeeTableBody">
                            <!-- Employee data will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Time Off Section -->
            <div class="time-off-section" style="display: none;">
                <div class="section-header">
                    <h2>Time Off</h2>
                    <button class="btn-primary" onclick="showRequestTimeOffModal()">
                        <i class="fas fa-plus"></i> Request Time Off
                    </button>
                </div>
                
                <div class="time-off-policies">
                    <h3>Time Off Policies</h3>
                    <div class="policy-cards">
                        <div class="policy-card">
                            <h4>PL</h4>
                            <p>Paid Leave</p>
                            <span class="policy-amount">10 days</span>
                        </div>
                        <div class="policy-card">
                            <h4>NPL</h4>
                            <p>Non-Paid Leave</p>
                            <span class="policy-amount">5 days</span>
                        </div>
                        <div class="policy-card">
                            <h4>MC</h4>
                            <p>Medical Certificate</p>
                            <span class="policy-amount">14 days</span>
                        </div>
                        <!-- More policy cards can be added here -->
                    </div>
                </div>
                
                <div class="request-history">
                    <h3>Request History</h3>
                    <table class="time-off-table">
                        <thead>
                            <tr>
                                <th>Date Requested</th>
                                <th>Type</th>
                                <th>From</th>
                                <th>To</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="timeOffHistoryBody">
                            <!-- Time off history will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Availability Section -->
            <div class="availability-section" style="display: none;">
                <div class="section-header">
                    <h2>Availability Preferences</h2>
                    <button class="btn-primary" onclick="showAvailabilityPreferenceModal()">
                        <i class="fas fa-plus"></i> Set Availability
                    </button>
                </div>
                
                <div class="availability-list">
                    <table id="availabilityTable">
                        <thead>
                            <tr>
                                <th>Preferred Days</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="availabilityTableBody">
                            <!-- Availability data will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Availability Preference Modal -->
            <div id="availabilityPreferenceModal" class="modal">
                <div class="modal-content">
                    <span class="close" onclick="closeAvailabilityPreferenceModal()">&times;</span>
                    <h2>Set Availability Preferences</h2>
                    <form id="availabilityPreferenceForm">
                        <div class="form-group">
                            <label>Preferred Days</label>
                            <div class="days-checkboxes">
                                <label class="day-checkbox">
                                    <input type="checkbox" name="preferredDays" value="M"> Monday
                                </label>
                                <label class="day-checkbox">
                                    <input type="checkbox" name="preferredDays" value="T"> Tuesday
                                </label>
                                <label class="day-checkbox">
                                    <input type="checkbox" name="preferredDays" value="W"> Wednesday
                                </label>
                                <label class="day-checkbox">
                                    <input type="checkbox" name="preferredDays" value="TH"> Thursday
                                </label>
                                <label class="day-checkbox">
                                    <input type="checkbox" name="preferredDays" value="F"> Friday
                                </label>
                                <label class="day-checkbox">
                                    <input type="checkbox" name="preferredDays" value="S"> Saturday
                                </label>
                                <label class="day-checkbox">
                                    <input type="checkbox" name="preferredDays" value="SN"> Sunday
                                </label>
                            </div>
                        </div>
                        <button type="submit" class="btn-primary">Submit Availability</button>
                    </form>
                </div>
            </div>

            <!-- Schedule Section -->
            <div class="schedule-section" style="display: none;">
                <div class="section-header">
                    <h2>Schedule</h2>
                </div>
                
                <div class="schedule-tabs">
                    <div class="tab active" data-tab="my-roster">My Roster</div>
                    <div class="tab" data-tab="replacement">Replacement</div>
                    <div class="tab manager-only" data-tab="pending-requests">Pending Requests</div>
                </div>
                
                <div class="tab-content">
                    <!-- Roster Tab -->
                    <div class="tab-pane active" id="my-roster-tab">
                        <div id="employee-calendar"></div>
                    </div>
                    
                    <!-- Replacement Tab -->
                    <div class="tab-pane" id="replacement-tab">
                        <div class="replacement-header">
                            <h3>Shift Swap Requests</h3>
                            <button class="btn-primary" onclick="showSwapRequestModal()">
                                <i class="fas fa-exchange-alt"></i> Request Shift Swap
                            </button>
                        </div>
                        
                        <div class="swap-requests-section">
                            <div class="filter-options">
                                <select id="swap-status-filter">
                                    <option value="all">All Requests</option>
                                    <option value="pending">Pending</option>
                                    <option value="approved">Approved</option>
                                    <option value="rejected">Rejected</option>
                                </select>
                                <select id="swap-date-filter">
                                    <option value="upcoming">Upcoming</option>
                                    <option value="past">Past</option>
                                    <option value="all">All Dates</option>
                                </select>
                            </div>

                            <!-- My Swap Requests -->
                            <div class="my-swap-requests">
                                <h4>My Swap Requests</h4>
                                <div class="swap-requests-container">
                                    <table class="swap-requests-table">
                                        <thead>
                                            <tr>
                                                <th>Request Date</th>
                                                <th>My Shift</th>
                                                <th>Requested Shift</th>
                                                <th>With Employee</th>
                                                <th>Status</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="mySwapRequestsBody">
                                            <!-- Populated by JavaScript -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- Incoming Swap Requests -->
                            <div class="incoming-swap-requests">
                                <h4>Incoming Swap Requests</h4>
                                <div class="swap-requests-container">
                                    <table class="swap-requests-table">
                                        <thead>
                                            <tr>
                                                <th>Request Date</th>
                                                <th>Requested By</th>
                                                <th>Their Shift</th>
                                                <th>Your Shift</th>
                                                <th>Status</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="incomingSwapRequestsBody">
                                            <!-- Populated by JavaScript -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- Manager Section -->
                            <div class="manager-swap-section manager-only">
                                <h4>All Swap Requests</h4>
                                <div class="swap-requests-container">
                                    <table class="swap-requests-table">
                                        <thead>
                                            <tr>
                                                <th>Request Date</th>
                                                <th>Requester</th>
                                                <th>Original Shift</th>
                                                <th>Target Employee</th>
                                                <th>Target Shift</th>
                                                <th>Status</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="allSwapRequestsBody">
                                            <!-- Populated by JavaScript -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Pending Requests Tab (Manager Only) -->
                    <div class="tab-pane manager-only" id="pending-requests-tab">
                        <div class="section-header">
                            <h2>Pending Availability Requests</h2>
                            <div class="filter-options">
                                <select id="department-filter">
                                    <option value="">All Departments</option>
                                    <option value="Front Desk">Front Desk</option>
                                    <option value="Housekeeping">Housekeeping</option>
                                    <option value="Kitchen">Kitchen</option>
                                </select>
                                <select id="date-range-filter">
                                    <option value="7">Next 7 Days</option>
                                    <option value="14">Next 14 Days</option>
                                    <option value="30">Next 30 Days</option>
                                    <option value="all">All Pending</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="requests-container">
                            <div class="requests-loading">Loading requests...</div>
                            <div class="requests-empty" style="display: none;">No pending requests found.</div>
                            <div class="requests-list"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="report-section" style="display: none;">
                <div class="section-header">
                    <h2>Analytics Dashboard</h2>
                    <div class="export-buttons">
                        <button class="btn-export" id="export-pdf">
                            <i class="fas fa-file-pdf"></i> Export PDF
                        </button>
                        <button class="btn-export" id="export-csv">
                            <i class="fas fa-file-csv"></i> Export CSV
                        </button>
                    </div>
                </div>
                
                <div class="report-grid">
                    <div class="report-card performance-metrics">
                        <h3>Performance Metrics</h3>
                        <p>Track key performance indicators such as attendance consistency and task completion rates.</p>
                        <div class="chart-container">
                            <canvas id="performanceChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="report-card feedback-integration">
                        <h3>Feedback Integration</h3>
                        <p>View aggregated feedback from peers and supervisors to understand employee performance qualitatively.</p>
                        <div class="chart-container">
                            <canvas id="feedbackChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="report-card managerial-insights">
                        <h3>Managerial Insights</h3>
                        <p>Analyze trends to identify top performance and areas needing more training.</p>
                        <div class="chart-container">
                            <canvas id="trendsChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="report-card goal-setting">
                        <h3>Goal Setting and Progress Tracking</h3>
                        <p>Set personal or team goals and track progress with visual indicators like progress bars.</p>
                        <div class="chart-container">
                            <canvas id="goalsChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Attendance Rate Section -->
            <div class="attendance-section" style="display: none;">
                <div class="section-header">
                    <h2>Attendance Rate Analytics</h2>
                    <div class="filter-options">
                        <select id="attendance-period-filter">
                            <option value="weekly">This Week</option>
                            <option value="monthly" selected>This Month</option>
                            <option value="quarterly">This Quarter</option>
                            <option value="yearly">This Year</option>
                        </select>
                    </div>
                </div>
                
                <div class="attendance-overview">
                    <div class="attendance-card">
                        <div class="attendance-rate">
                            <div class="rate-circle">
                                <svg viewBox="0 0 36 36" class="circular-chart">
                                    <path class="circle-bg" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                                    <path class="circle" stroke-dasharray="85, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                                    <text x="18" y="20.35" class="percentage">85%</text>
                                </svg>
                            </div>
                            <div class="rate-label">Overall Attendance Rate</div>
                        </div>
                        <div class="attendance-details">
                            <div class="detail-item">
                                <span class="label">On-time Days:</span>
                                <span class="value">17</span>
                            </div>
                            <div class="detail-item">
                                <span class="label">Late Arrivals:</span>
                                <span class="value">2</span>
                            </div>
                            <div class="detail-item">
                                <span class="label">Absences:</span>
                                <span class="value">1</span>
                            </div>
                            <div class="detail-item">
                                <span class="label">Approved Leave:</span>
                                <span class="value">0</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="attendance-history">
                    <h3>Attendance History</h3>
                    <div class="chart-container attendance-chart-container">
                        <canvas id="attendanceHistoryChart"></canvas>
                    </div>
                </div>
                
                <div class="attendance-trends">
                    <div class="trend-cards">
                        <div class="trend-card">
                            <h4>Punctuality Trend</h4>
                            <div class="chart-container trend-chart-container">
                                <canvas id="punctualityChart"></canvas>
                            </div>
                        </div>
                        <div class="trend-card">
                            <h4>Department Comparison</h4>
                            <div class="chart-container trend-chart-container">
                                <canvas id="departmentComparisonChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Payroll Section -->
            <div class="payroll-section" style="display: none;">
                <div class="section-header">
                    <h2>Payroll Management</h2>
                    <div class="filter-options">
                        <select id="payroll-period-filter">
                            <option value="current">Current Pay Period</option>
                            <option value="previous">Previous Pay Period</option>
                            <option value="custom">Custom Date Range</option>
                        </select>
                        <div class="date-range-picker" id="custom-date-range" style="display: none;">
                            <input type="date" id="custom-date-start" placeholder="Start Date">
                            <span>to</span>
                            <input type="date" id="custom-date-end" placeholder="End Date">
                        </div>
                        <button class="btn-primary" id="calculate-payroll">
                            <i class="fas fa-calculator"></i> Calculate
                        </button>
                        <button class="btn-primary" id="export-payroll">
                            <i class="fas fa-file-export"></i> Export
                        </button>
                    </div>
                </div>
                
                <div class="payroll-summary">
                    <div class="summary-header">
                        <h3>Pay Period: <span id="pay-period-date">March 1 - March 15, 2025</span></h3>
                        <span class="payment-status-badge" id="payment-status">Processing</span>
                    </div>
                    <div class="payroll-card">
                        <div class="payroll-overview">
                            <div class="overview-item">
                                <span class="label">Total Hours</span>
                                <span class="value" id="total-hours">80.0</span>
                            </div>
                            <div class="overview-item">
                                <span class="label">Regular Hours</span>
                                <span class="value" id="regular-hours">76.5</span>
                            </div>
                            <div class="overview-item">
                                <span class="label">Overtime Hours</span>
                                <span class="value" id="overtime-hours">3.5</span>
                            </div>
                            <div class="overview-item">
                                <span class="label">Hourly Rate</span>
                                <span class="value" id="hourly-rate">$20.00</span>
                            </div>
                            <div class="overview-item">
                                <span class="label">YTD Earnings</span>
                                <span class="value" id="ytd-earnings">$9,812.50</span>
                            </div>
                        </div>
                        <div class="payroll-details">
                            <div class="detail-column">
                                <h4>Earnings</h4>
                                <div class="detail-item">
                                    <span class="label">Regular Pay</span>
                                    <span class="value" id="regular-pay">$1,530.00</span>
                                </div>
                                <div class="detail-item">
                                    <span class="label">Overtime Pay</span>
                                    <span class="value" id="overtime-pay">$105.00</span>
                                </div>
                                <div class="detail-item">
                                    <span class="label">Holiday Pay</span>
                                    <span class="value" id="holiday-pay">$0.00</span>
                                </div>
                                <div class="detail-item">
                                    <span class="label">Bonus</span>
                                    <span class="value" id="bonus-pay">$0.00</span>
                                </div>
                                <div class="detail-item">
                                    <span class="label">Allowances</span>
                                    <span class="value" id="allowances">$0.00</span>
                                </div>
                                <div class="detail-item total">
                                    <span class="label">Gross Pay</span>
                                    <span class="value" id="gross-pay">$1,635.00</span>
                                </div>
                            </div>
                            <div class="detail-column">
                                <h4>Deductions</h4>
                                <div class="detail-item">
                                    <span class="label">Income Tax</span>
                                    <span class="value" id="tax-deduction">$245.25</span>
                                    <span class="info-tooltip" title="Based on tax bracket: 15%"><i class="fas fa-info-circle"></i></span>
                                </div>
                                <div class="detail-item">
                                    <span class="label">Health Insurance</span>
                                    <span class="value" id="insurance-deduction">$75.00</span>
                                </div>
                                <div class="detail-item">
                                    <span class="label">Retirement</span>
                                    <span class="value" id="retirement-deduction">$81.75</span>
                                </div>
                                <div class="detail-item">
                                    <span class="label">Other Deductions</span>
                                    <span class="value" id="other-deduction">$50.00</span>
                                </div>
                                <div class="detail-item total">
                                    <span class="label">Total Deductions</span>
                                    <span class="value" id="total-deduction">$452.00</span>
                                </div>
                            </div>
                        </div>
                        <div class="net-pay">
                            <span class="label">Net Pay</span>
                            <span class="value" id="net-pay">$1,183.00</span>
                            <div class="payment-details">
                                <span class="payment-method"><i class="fas fa-university"></i> Direct Deposit</span>
                                <span class="payment-date">Payment Date: <span id="payment-date">March 20, 2025</span></span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="payroll-details-grid">
                    <div class="payroll-details-card tax-breakdown">
                        <h3><i class="fas fa-file-invoice-dollar"></i> Tax Breakdown</h3>
                        <div class="tax-details">
                            <div class="tax-item">
                                <span class="label">Federal Income Tax</span>
                                <span class="value" id="federal-tax">$196.20</span>
                            </div>
                            <div class="tax-item">
                                <span class="label">State Income Tax</span>
                                <span class="value" id="state-tax">$49.05</span>
                            </div>
                            <div class="tax-item">
                                <span class="label">Medicare</span>
                                <span class="value" id="medicare-tax">$23.71</span>
                            </div>
                            <div class="tax-item">
                                <span class="label">Social Security</span>
                                <span class="value" id="social-security-tax">$101.37</span>
                            </div>
                            <div class="tax-item total">
                                <span class="label">Total Tax</span>
                                <span class="value" id="total-tax">$370.33</span>
                            </div>
                        </div>
                        <div class="ytd-tax-summary">
                            <h4>Year-to-Date Tax Summary</h4>
                            <div class="tax-chart-container">
                                <canvas id="taxBreakdownChart"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <div class="payroll-details-card benefits-summary">
                        <h3><i class="fas fa-hand-holding-heart"></i> Benefits Summary</h3>
                        <div class="benefits-details">
                            <div class="benefit-item">
                                <span class="label">Health Insurance</span>
                                <div class="benefit-value">
                                    <span class="value">$75.00</span>
                                    <span class="benefit-type">Employee Contribution</span>
                                </div>
                            </div>
                            <div class="benefit-item">
                                <span class="label">Dental Coverage</span>
                                <div class="benefit-value">
                                    <span class="value">$25.00</span>
                                    <span class="benefit-type">Fully Covered by Employer</span>
                                </div>
                            </div>
                            <div class="benefit-item">
                                <span class="label">Vision Plan</span>
                                <div class="benefit-value">
                                    <span class="value">$15.00</span>
                                    <span class="benefit-type">Fully Covered by Employer</span>
                                </div>
                            </div>
                            <div class="benefit-item">
                                <span class="label">401(k) Contribution</span>
                                <div class="benefit-value">
                                    <span class="value">$81.75 (5%)</span>
                                    <span class="benefit-type">Employer Match: $81.75 (5%)</span>
                                </div>
                            </div>
                            <div class="benefit-item">
                                <span class="label">Life Insurance</span>
                                <div class="benefit-value">
                                    <span class="value">$10.00</span>
                                    <span class="benefit-type">Fully Covered by Employer</span>
                                </div>
                            </div>
                        </div>
                        <div class="benefit-totals">
                            <div class="benefit-total-item">
                                <span class="label">Employee Contributions</span>
                                <span class="value" id="employee-benefit-contributions">$156.75</span>
                            </div>
                            <div class="benefit-total-item">
                                <span class="label">Employer Contributions</span>
                                <span class="value" id="employer-benefit-contributions">$131.75</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="payroll-breakdown">
                    <h3>Detailed Breakdown</h3>
                    <div class="tab-container">
                        <div class="tab-header">
                            <div class="tab active" data-tab="hours">Hours & Attendance</div>
                            <div class="tab" data-tab="earnings">Earnings Detail</div>
                            <div class="tab" data-tab="deductions">Deductions</div>
                            <div class="tab" data-tab="history">Payment History</div>
                            <div class="tab" data-tab="ytd">YTD Summary</div>
                            <div class="tab" data-tab="settings">Payroll Settings</div>
                        </div>
                        <div class="tab-content">
                            <div class="tab-pane active" id="hours-tab">
                                <div class="hours-summary">
                                    <div class="hours-summary-card">
                                        <div class="hours-total">
                                            <span class="label">Total Hours</span>
                                            <span class="value">80.0</span>
                                        </div>
                                        <div class="hours-breakdown">
                                            <div class="hours-item">
                                                <span class="color-dot regular"></span>
                                                <span class="hours-type">Regular: 76.5</span>
                                            </div>
                                            <div class="hours-item">
                                                <span class="color-dot overtime"></span>
                                                <span class="hours-type">Overtime: 3.5</span>
                                            </div>
                                            <div class="hours-item">
                                                <span class="color-dot holiday"></span>
                                                <span class="hours-type">Holiday: 0.0</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <table class="payroll-table">
                                    <thead>
                                        <tr>
                                            <th>Date</th>
                                            <th>Shift</th>
                                            <th>Clock In</th>
                                            <th>Clock Out</th>
                                            <th>Break</th>
                                            <th>Hours</th>
                                            <th>Type</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="hours-table-body">
                                        <!-- This will be populated by JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                            <div class="tab-pane" id="earnings-tab">
                                <div class="earnings-details">
                                    <div class="earnings-summary">
                                        <h4>Earnings Breakdown for Current Period</h4>
                                        <div class="chart-container earnings-chart-container">
                                            <canvas id="earningsChart"></canvas>
                                        </div>
                                    </div>
                                    <div class="earnings-details-table">
                                        <table class="payroll-table">
                                            <thead>
                                                <tr>
                                                    <th>Earnings Type</th>
                                                    <th>Rate</th>
                                                    <th>Hours/Units</th>
                                                    <th>Amount</th>
                                                </tr>
                                            </thead>
                                            <tbody id="earnings-table-body">
                                                <!-- Populated by JavaScript -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="deductions-tab">
                                <div class="deductions-breakdown">
                                    <div class="deductions-chart-area">
                                        <h4>Deductions Breakdown</h4>
                                        <div class="chart-container deductions-chart-container">
                                            <canvas id="deductionsChart"></canvas>
                                        </div>
                                    </div>
                                    <div class="deductions-details">
                                        <h4>Detailed Deductions</h4>
                                        <div class="deduction-category">
                                            <h5>Tax Deductions</h5>
                                            <table class="deduction-table">
                                                <tbody id="tax-deduction-details">
                                                    <!-- Populated by JavaScript -->
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="deduction-category">
                                            <h5>Benefit Deductions</h5>
                                            <table class="deduction-table">
                                                <tbody id="benefit-deduction-details">
                                                    <!-- Populated by JavaScript -->
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="deduction-category">
                                            <h5>Other Deductions</h5>
                                            <table class="deduction-table">
                                                <tbody id="other-deduction-details">
                                                    <!-- Populated by JavaScript -->
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="history-tab">
                                <div class="payment-history-filters">
                                    <div class="filter-group">
                                        <label for="history-year-filter">Year:</label>
                                        <select id="history-year-filter">
                                            <option value="2025">2025</option>
                                            <option value="2024">2024</option>
                                        </select>
                                    </div>
                                    <div class="filter-group">
                                        <label for="history-status-filter">Status:</label>
                                        <select id="history-status-filter">
                                            <option value="all">All</option>
                                            <option value="paid">Paid</option>
                                            <option value="pending">Pending</option>
                                            <option value="processing">Processing</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="history-timeline">
                                    <div class="timeline-chart-container">
                                        <canvas id="paymentHistoryChart"></canvas>
                                    </div>
                                </div>
                                <table class="payroll-table">
                                    <thead>
                                        <tr>
                                            <th>Period</th>
                                            <th>Gross Pay</th>
                                            <th>Deductions</th>
                                            <th>Net Pay</th>
                                            <th>Payment Date</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="history-table-body">
                                        <!-- This will be populated by JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                            <div class="tab-pane" id="ytd-tab">
                                <div class="ytd-summary">
                                    <div class="ytd-cards">
                                        <div class="ytd-card">
                                            <span class="ytd-label">YTD Gross Earnings</span>
                                            <span class="ytd-value" id="ytd-gross">$9,812.50</span>
                                            <div class="ytd-progress">
                                                <div class="progress-bar" style="width: 24%;"></div>
                                                <span class="progress-text">24% of Annual Estimate</span>
                                            </div>
                                        </div>
                                        <div class="ytd-card">
                                            <span class="ytd-label">YTD Taxes Paid</span>
                                            <span class="ytd-value" id="ytd-taxes">$1,471.88</span>
                                            <div class="ytd-progress">
                                                <div class="progress-bar" style="width: 24%;"></div>
                                                <span class="progress-text">15% Effective Tax Rate</span>
                                            </div>
                                        </div>
                                        <div class="ytd-card">
                                            <span class="ytd-label">YTD Retirement Contributions</span>
                                            <span class="ytd-value" id="ytd-retirement">$490.63</span>
                                            <div class="ytd-progress">
                                                <div class="progress-bar" style="width: 5%;"></div>
                                                <span class="progress-text">5% Contribution Rate</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="ytd-visualization">
                                        <div class="chart-container ytd-chart-container">
                                            <canvas id="ytdEarningsChart"></canvas>
                                        </div>
                                    </div>
                                </div>
                                <div class="ytd-quarterly-breakdown">
                                    <h4>Quarterly Breakdown</h4>
                                    <table class="payroll-table">
                                        <thead>
                                            <tr>
                                                <th>Quarter</th>
                                                <th>Gross Earnings</th>
                                                <th>Taxes</th>
                                                <th>Deductions</th>
                                                <th>Net Pay</th>
                                            </tr>
                                        </thead>
                                        <tbody id="quarterly-breakdown-body">
                                            <!-- Populated by JavaScript -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="tab-pane" id="settings-tab">
                                <div class="payroll-settings">
                                    <div class="settings-card tax-settings">
                                        <h4>Tax Withholding Settings</h4>
                                        <form id="tax-settings-form">
                                            <div class="form-group">
                                                <label for="filing-status">Filing Status</label>
                                                <select id="filing-status">
                                                    <option value="single">Single</option>
                                                    <option value="married">Married Filing Jointly</option>
                                                    <option value="head">Head of Household</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label for="allowances">Allowances/Exemptions</label>
                                                <input type="number" id="allowances" min="0" value="1">
                                            </div>
                                            <div class="form-group">
                                                <label for="additional-withholding">Additional Withholding</label>
                                                <input type="number" id="additional-withholding" min="0" step="0.01" value="0">
                                            </div>
                                            <button type="submit" class="btn-primary">Update Tax Settings</button>
                                        </form>
                                    </div>
                                    <div class="settings-card direct-deposit">
                                        <h4>Direct Deposit Settings</h4>
                                        <form id="direct-deposit-form">
                                            <div class="form-group">
                                                <label for="bank-name">Bank Name</label>
                                                <input type="text" id="bank-name" value="Chase Bank">
                                            </div>
                                            <div class="form-group">
                                                <label for="account-type">Account Type</label>
                                                <select id="account-type">
                                                    <option value="checking">Checking</option>
                                                    <option value="savings">Savings</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label for="routing-number">Routing Number</label>
                                                <input type="text" id="routing-number" value="•••••••••" pattern="[0-9]{9}">
                                            </div>
                                            <div class="form-group">
                                                <label for="account-number">Account Number</label>
                                                <input type="text" id="account-number" value="••••••••••••" pattern="[0-9]{4,17}">
                                            </div>
                                            <div class="form-group">
                                                <label for="deposit-amount">Deposit Amount</label>
                                                <select id="deposit-amount">
                                                    <option value="full">Full Amount (100%)</option>
                                                    <option value="partial">Partial Amount</option>
                                                </select>
                                            </div>
                                            <button type="submit" class="btn-primary">Update Direct Deposit</button>
                                        </form>
                                    </div>
                                    <div class="settings-card benefit-elections">
                                        <h4>Benefit Elections</h4>
                                        <div class="form-group">
                                            <label for="retirement-contribution">Retirement Contribution</label>
                                            <div class="slider-container">
                                                <input type="range" id="retirement-contribution" min="0" max="20" step="1" value="5">
                                                <span class="slider-value">5%</span>
                                            </div>
                                            <div class="contribution-impact">
                                                <span>Impact on Paycheck: -$81.75</span>
                                                <span>Employer Match: +$81.75</span>
                                            </div>
                                        </div>
                                        <div class="health-plans">
                                            <h5>Health Insurance Plan</h5>
                                            <div class="plan-options">
                                                <div class="plan-option">
                                                    <input type="radio" id="health-plan-basic" name="health-plan" checked>
                                                    <label for="health-plan-basic">
                                                        <span class="plan-name">Basic Plan</span>
                                                        <span class="plan-cost">$75.00/pay period</span>
                                                    </label>
                                                </div>
                                                <div class="plan-option">
                                                    <input type="radio" id="health-plan-premium" name="health-plan">
                                                    <label for="health-plan-premium">
                                                        <span class="plan-name">Premium Plan</span>
                                                        <span class="plan-cost">$125.00/pay period</span>
                                                    </label>
                                                </div>
                                                <div class="plan-option">
                                                    <input type="radio" id="health-plan-family" name="health-plan">
                                                    <label for="health-plan-family">
                                                        <span class="plan-name">Family Plan</span>
                                                        <span class="plan-cost">$225.00/pay period</span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="additional-benefits">
                                            <h5>Optional Benefits</h5>
                                            <div class="benefit-toggle">
                                                <label class="switch">
                                                    <input type="checkbox" id="dental-plan" checked>
                                                    <span class="slider round"></span>
                                                </label>
                                                <span class="benefit-toggle-label">Dental Plan ($25.00 - Employer Paid)</span>
                                            </div>
                                            <div class="benefit-toggle">
                                                <label class="switch">
                                                    <input type="checkbox" id="vision-plan" checked>
                                                    <span class="slider round"></span>
                                                </label>
                                                <span class="benefit-toggle-label">Vision Plan ($15.00 - Employer Paid)</span>
                                            </div>
                                            <div class="benefit-toggle">
                                                <label class="switch">
                                                    <input type="checkbox" id="life-insurance" checked>
                                                    <span class="slider round"></span>
                                                </label>
                                                <span class="benefit-toggle-label">Life Insurance ($10.00 - Employer Paid)</span>
                                            </div>
                                        </div>
                                        <button type="button" class="btn-primary">Update Benefit Elections</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Employee Modal -->
    <div id="createEmployeeModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Create New Employee</h2>
            <form id="createEmployeeForm">
                <div class="form-group">
                    <label for="name">Full Name</label>
                    <input type="text" id="name" required>
                </div>
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" required>
                </div>
                <div class="form-group">
                    <label for="password">Initial Password</label>
                    <input type="password" id="password" required>
                </div>
                <div class="form-group">
                    <label for="birthday">Birthday</label>
                    <input type="date" id="birthday" required>
                </div>
                <div class="form-group">
                    <label for="gender">Gender</label>
                    <select id="gender" required>
                        <option value="">Select Gender</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="role">Role</label>
                    <select id="role" required>
                        <option value="Employee">Employee</option>
                        <option value="Manager">Manager</option>
                        <option value="Admin">Admin</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="department">Department</label>
                    <input type="text" id="department">
                </div>
                <button type="submit" class="btn-primary">Create Employee</button>
            </form>
        </div>
    </div>

    <!-- Profile Modal -->
    <div id="profileModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeProfileModal()">&times;</span>
            <h2>Personal Information</h2>
            <div class="profile-info">
                <div class="profile-avatar">
                    <i class="fas fa-user-circle"></i>
                </div>
                <div class="profile-details">
                    <div class="info-row">
                        <span class="info-label">Name:</span>
                        <span id="profile-name" class="info-value">Loading...</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Email:</span>
                        <span id="profile-email" class="info-value">Loading...</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Role:</span>
                        <span id="profile-role" class="info-value">Loading...</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Department:</span>
                        <span id="profile-department" class="info-value">Loading...</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Birthday:</span>
                        <span id="profile-birthday" class="info-value">Loading...</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Gender:</span>
                        <span id="profile-gender" class="info-value">Loading...</span>
                    </div>
                </div>
            </div>
            <div class="profile-actions">
                <button class="btn-primary" onclick="showEditProfileModal()">
                    <i class="fas fa-edit"></i> Edit Profile
                </button>
            </div>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div id="editProfileModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeEditProfileModal()">&times;</span>
            <h2>Edit Profile</h2>
            <form id="editProfileForm">
                <div class="form-group">
                    <label for="edit-name">Full Name</label>
                    <input type="text" id="edit-name" required>
                </div>
                <div class="form-group">
                    <label for="edit-email">Email</label>
                    <input type="email" id="edit-email" required readonly class="readonly-field">
                </div>
                <div class="form-group">
                    <label for="edit-department">Department</label>
                    <input type="text" id="edit-department" readonly class="readonly-field">
                </div>
                <div class="form-group">
                    <label for="edit-birthday">Birthday</label>
                    <input type="date" id="edit-birthday" required>
                </div>
                <div class="form-group">
                    <label for="edit-gender">Gender</label>
                    <select id="edit-gender" required>
                        <option value="">Select Gender</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <button type="submit" class="btn-primary">Save Changes</button>
            </form>
        </div>
    </div>

    <!-- Edit Shift Modal -->
    <div id="editShiftModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeEditShiftModal()">&times;</span>
            <h2>Edit Shift</h2>
            <form id="editShiftForm">
                <div class="form-group">
                    <label for="edit-shift-title">Shift Title</label>
                    <input type="text" id="edit-shift-title" required>
                </div>
                <div class="form-row">
                    <div class="form-group half-width">
                        <label for="edit-shift-start-date">Start Date</label>
                        <input type="date" id="edit-shift-start-date" required>
                    </div>
                    <div class="form-group half-width">
                        <label for="edit-shift-start-time">Start Time</label>
                        <input type="time" id="edit-shift-start-time" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group half-width">
                        <label for="edit-shift-end-date">End Date</label>
                        <input type="date" id="edit-shift-end-date" required>
                    </div>
                    <div class="form-group half-width">
                        <label for="edit-shift-end-time">End Time</label>
                        <input type="time" id="edit-shift-end-time" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="edit-shift-status">Status</label>
                    <select id="edit-shift-status" required>
                        <option value="Pending">Pending</option>
                        <option value="Confirmed">Confirmed</option>
                        <option value="Completed">Completed</option>
                        <option value="Cancelled">Cancelled</option>
                    </select>
                </div>
                <input type="hidden" id="edit-shift-id">
                <div class="form-actions">
                    <button type="submit" class="btn-primary">Save Changes</button>
                    <button type="button" class="btn-danger" onclick="deleteShift()">Delete Shift</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Shift Modal -->
    <div id="addShiftModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeAddShiftModal()">&times;</span>
            <h2>Add New Shift</h2>
            <form id="addShiftForm">
                <div class="form-group">
                    <label for="add-shift-title">Shift Title</label>
                    <input type="text" id="add-shift-title" required>
                </div>
                <div class="form-row">
                    <div class="form-group half-width">
                        <label for="add-shift-start-date">Start Date</label>
                        <input type="date" id="add-shift-start-date" required>
                    </div>
                    <div class="form-group half-width">
                        <label for="add-shift-start-time">Start Time</label>
                        <input type="time" id="add-shift-start-time" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group half-width">
                        <label for="add-shift-end-date">End Date</label>
                        <input type="date" id="add-shift-end-date" required>
                    </div>
                    <div class="form-group half-width">
                        <label for="add-shift-end-time">End Time</label>
                        <input type="time" id="add-shift-end-time" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="add-shift-status">Status</label>
                    <select id="add-shift-status" required>
                        <option value="Pending">Pending</option>
                        <option value="Confirmed">Confirmed</option>
                    </select>
                </div>
                <button type="submit" class="btn-primary">Add Shift</button>
            </form>
        </div>
    </div>

    <!-- Request Time Off Modal -->
    <div id="requestTimeOffModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeRequestTimeOffModal()">&times;</span>
            <h2>New Time Off Request</h2>
            <form id="requestTimeOffForm">
                <div class="form-group">
                    <label for="time-off-policy">Time Off Policy</label>
                    <select id="time-off-policy" required>
                        <option value="">Select Type</option>
                        <option value="PL">Paid Leave (PL)</option>
                        <option value="NPL">Non-Paid Leave (NPL)</option>
                        <option value="MC">Medical Certificate (MC)</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group half-width">
                        <label for="time-off-start-date">Start Date</label>
                        <input type="date" id="time-off-start-date" required>
                    </div>
                    <div class="form-group half-width">
                        <label for="time-off-end-date">End Date</label>
                        <input type="date" id="time-off-end-date" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="time-off-notes">Additional Notes</label>
                    <textarea id="time-off-notes" rows="4"></textarea>
                </div>
                <button type="submit" class="btn-primary">Submit Request</button>
            </form>
        </div>
    </div>

    <!-- Time Off Request Details Modal (Manager View) -->
    <div id="timeOffDetailsModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeTimeOffDetailsModal()">&times;</span>
            <h2>Time Off Request</h2>
            <div class="employee-info">
                <h3 id="request-employee-name">Employee Name</h3>
            </div>
            <div class="request-details" id="request-details-container">
                <!-- Request details will be populated here -->
            </div>
            <div class="form-actions manager-actions">
                <button type="button" class="btn-primary" onclick="approveTimeOff()">Accept</button>
                <button type="button" class="btn-danger" onclick="rejectTimeOff()">Reject</button>
            </div>
        </div>
    </div>

    <!-- Add this new modal for shift swap requests -->
    <div id="swapRequestModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeSwapRequestModal()">&times;</span>
            <h2>Request Shift Swap</h2>
            <form id="swapRequestForm">
                <div class="form-group">
                    <label for="my-shift">My Shift</label>
                    <select id="my-shift" required>
                        <option value="">Select your shift</option>
                        <!-- Populated by JavaScript -->
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="target-employee">Target Employee</label>
                    <select id="target-employee" required>
                        <option value="">Select employee</option>
                        <!-- Populated by JavaScript -->
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="target-shift">Target Shift</label>
                    <select id="target-shift" required disabled>
                        <option value="">Select target shift</option>
                        <!-- Populated by JavaScript -->
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="swap-reason">Reason for Swap</label>
                    <textarea id="swap-reason" rows="3" required></textarea>
                </div>
                
                <button type="submit" class="btn-primary">Submit Request</button>
            </form>
        </div>
    </div>
</body>
</html> 